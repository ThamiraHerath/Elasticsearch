[[three-availability-zones]]
== Self-managed hot-frozen three availability zone architecture for time series data
++++
<titleabbrev>Architecture: Self-managed - three availability zone</titleabbrev>
++++

This article outlines a scalable and highly available architecture for Elasticsearch using three availability zones. The architecture encompasses all essential components of the Elastic Stack and serves as a foundational blueprint to ensure your deployment is resilient and ready to handle any desired workload. While this overview includes high-level representations of data flow, detailed implementation will be covered in subsequent documentation.

TIP: This architecture includes all the necessary components of the Elastic Stack and is not intended for sizing workloads, but rather as a basis to ensure the architecture you deploy is foundationally ready to handle any desired workload with resiliency. 

[discrete]
[[three-availability-zones-use-case]]
=== Use case

This architecture is intended for organizations that need to do the following: 

* Be resilient to unplanned outages
* Ensure availability during operational maintenance of any given availability zone 

[discrete]
[[three-availability-zones-architecture]]
=== Architecture

image::images/three-availability-zone.png["A three-availability-zones time-series architecture"]

[discrete]
[[three-availability-zones-configuration]]
=== Example configuration

Based on recommendations, here is a sample configuration for an ingest rate of 1TB/day with an ILM policy of 1 day in the hot tier and 89 days in the frozen tier for a total of 90 days of searchable data.

* Hot tier: 120G RAM (2 60G RAM node x 3 availability zones)
* Frozen tier: 120G RAM (1 60G RAM node x 3 availability zones)
* Machine learning: 128G RAM (1 64G node x 3 availability zones)
* Master nodes: 24G RAM (8G node x 3 availability zones)
* Kibana: 16G RAM (16G node x 3 availability zone)

[discrete]
[[three-availability-zones-considerations]]
=== Important considerations

The following list are important conderations for this architecture:

* If you require more than one copy of the most recently written data to be available, you can add data nodes to pod 3 and set the https://www.elastic.co/guide/en/elasticsearch/reference/current/size-your-shards.html#create-a-sharding-strategy[sharding strategy] to 1 primary and 2 replicas.
* Maintenance should be done only on one pod at a time.
* A yellow cluster state is acceptable during maintenance. This is due to the replica shards being unassigned.

[discrete]
[[three-zone-limitations]]
=== Limitations of this architecture
* No region resilience
* Only a single copy of the most recently written data that is not yet part of a snapshot data exists during maintenance windows.
* This design assumes the data is written once and not updated.

[discrete]
[[three-availability-zones-resources]]

=== Resources and references



